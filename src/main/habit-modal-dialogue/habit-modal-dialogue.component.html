<div class="habit-dialogue">
  <div class="Header">
    <p class="header-text">New Habit</p>
  </div>
  <div class="name-container">
    <div class="name-text">NAME</div>
    <div class="name-input">

      <input *ngIf="!isEditModal()" [(ngModel)]="habitName" [matMenuTriggerFor]="habit.getMatMenu()"
             class="input-habit">
      <input *ngIf="isEditModal()" [(ngModel)]="habitName" class="input-habit">

      <div class="habit-icon">
        <img [src]=getIconSource() alt="Question Mark" class="mark">
      </div>
    </div>
  </div>
  <div class="goal-container">
    <div class="goal-text">GOAL</div>
    <div class="goal-input-container">
      <p-inputNumber (ngModelChange)="onGoalChange($event)"
                     *ngIf="!isWaterOrRunningOrCycling()" [(ngModel)]="goalValue"
                     [max]="100"
                     [min]="1"
                     [showButtons]="true" [step]="1"
                     class="up-down-arrows goal-value"
                     inputId="minmax-buttons"></p-inputNumber>

      <p-inputNumber (ngModelChange)="onGoalChange($event)" *ngIf="habitName==AppConstants.drinkWater"
                     [(ngModel)]="goalWater"
                     [max]="30000"
                     [min]="100"
                     [showButtons]="true"
                     [step]="100"
                     class="up-down-arrows goal-value"
                     inputId="minmax-buttons"></p-inputNumber>
      <p-inputNumber (ngModelChange)="onGoalChange($event)" *ngIf="habitName==AppConstants.running"
                     [(ngModel)]="runningValue"
                     [max]="50" [min]="1"
                     [showButtons]="true"
                     [step]="1"
                     class="up-down-arrows goal-value"
                     inputId="minmax-buttons"></p-inputNumber>
      <p-inputNumber (ngModelChange)="onGoalChange($event)" *ngIf="habitName==AppConstants.cycling"
                     [(ngModel)]="cyclingValue"
                     [max]="50" [min]="1"
                     [showButtons]="true"
                     [step]="1"
                     class="up-down-arrows goal-value"
                     inputId="minmax-buttons"></p-inputNumber>
      <div *ngIf="!isWaterOrRunningOrCycling() && !isEditModal()" [matMenuTriggerFor]="frequency.getMatMenu()"
           class="input-wrapper">
        <input (ngModelChange)="updateFrequency(goalFrequency)" [(ngModel)]="goalFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div *ngIf="!isWaterOrRunningOrCycling() && isEditModal()"
           class="input-wrapper">
        <input [(ngModel)]="goalFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div *ngIf="habitName==AppConstants.drinkWater && !isEditModal()"
           [matMenuTriggerFor]="Waterfrequency.getMatMenu()"
           class="input-wrapper">
        <input (ngModelChange)="updateFrequency(waterFrequency)" [(ngModel)]="waterFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div *ngIf="habitName==AppConstants.drinkWater && isEditModal()" class="input-wrapper">
        <input [(ngModel)]="waterFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div *ngIf="(habitName==AppConstants.running|| habitName==AppConstants.cycling) && !isEditModal()"
           [matMenuTriggerFor]="Runningfrequency.getMatMenu()"
           class="input-wrapper">
        <input (ngModelChange)="updateFrequency(runningFrequency)" [(ngModel)]="runningFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div *ngIf="(habitName==AppConstants.running|| habitName==AppConstants.cycling) && isEditModal()"
           class="input-wrapper">
        <input [(ngModel)]="runningFrequency" class="goal-frequency"
               readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
      <div [matMenuTriggerFor]="frequencyPeriod.getMatMenu()" class="input-wrapper">
        <input [(ngModel)]="frequencyPerPeriod" class="goal-frequency" readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
    </div>
  </div>

  <div class="repeat-container">
    <div class="repeat-text">REPEAT</div>
    <div class="repeat-input-container">
      <div [matMenuTriggerFor]="repeatMenu" class="input-wrapper">
        <input [value]="getDayValue()" class="repeat-frequency" readonly/>
        <img alt="Up" class="up-repeat" src="assets/svg/up.svg"/>
        <img alt="Down" class="down-repeat" src="assets/svg/down.svg"/>
      </div>
    </div>
  </div>

  <div class="tod-container">
    <div class="tod-text">TIME OF DAY</div>
    <div class="goal-input-container">
      <div [matMenuTriggerFor]="timeDay.getMatMenu()" class="input-wrapper">
        <input [value]="getTimeOfDayDisplayValue(timeOfDay)" class="tod-input" readonly/>
        <img alt="Up" class="up" src="assets/svg/up.svg"/>
        <img alt="Down" class="down" src="assets/svg/down.svg"/>
      </div>
    </div>
  </div>
  <div class="calender-container">
    <div class="repeat-text">START DATE</div>
    <div class="repeat-input-container">

      <div (click)="toggleCalendar()" [matMenuTriggerFor]="calender" class="input-wrapper">
        <input [value]="getCalenderDisplayValue(startSelectedDate)" class="repeat-frequency" readonly/>
        <img alt="Calender" class="calendar-button" src="assets/svg/calender.svg"/>
      </div>
    </div>
  </div>
  <app-water-frequency-menu #Waterfrequency (waterGoal)="updateWaterGoalFrequency($event)"></app-water-frequency-menu>
  <app-running-frequency-menu #Runningfrequency
                              (runningGoal)="updateRunningGoalFrequency($event)"></app-running-frequency-menu>
  <app-frequency-menu #frequency (frequency)="updateGoalFrequency($event)"></app-frequency-menu>

  <app-frequency-period-menu #frequencyPeriod
                             (frequencyPeriod)="updateFrequencyPeriod($event)"></app-frequency-period-menu>

  <app-time-day-menu #timeDay (timeDay)="updateTimeOfDay($event)"></app-time-day-menu>
  <div class="modal-footer">
    <div class="buttons">
      <p-button (click)="deleteHabit(receivedHabit)" *ngIf="isEditModal()" class="delete" label="Delete"
                size="small"></p-button>
      <p-button (click)="archiveHabit()" *ngIf="isEditModal()" class="archive" label="Archive" size="small"></p-button>
      <p-button (click)="close()" class="cancel" label="Cancel" size="small"></p-button>
      <p-button (click)="saveHabit()" [disabled]="!habitName" class="save" label="Save" size="small"></p-button>
      <p-toast></p-toast>
      <p-confirmPopup></p-confirmPopup>

    </div>
  </div>

  <mat-menu #calender="matMenu" [hasBackdrop]="false" class="calender-container" overlapTrigger="false">
    <p-calendar
      (click)="onCalendarClick($event)"
      (onSelect)="onStartDateSelect($event)"
      [(ngModel)]="startSelectedDate"
      [inline]="true"
      [showIcon]="false"
      dateFormat="M d, yy">
    </p-calendar>
  </mat-menu>
  <mat-menu #month="matMenu" [hasBackdrop]="false" class="month-container" overlapTrigger="false">
    <p-calendar
      (click)="onCalendarClick($event)"
      (onSelect)="onDateSelect($event)"
      [(ngModel)]="selectedDate"
      [inline]="true"
      [showIcon]="false">
      <ng-template let-date pTemplate="date">
        <div [ngClass]="{'selected': isSelected(date)}" class="custom-date">
          {{ date.day }}
        </div>
      </ng-template>
    </p-calendar>
  </mat-menu>
  <mat-menu #repeatMenu="matMenu" [hasBackdrop]="false" class="repeat-menu" overlapTrigger="false">
    <button [matMenuTriggerFor]="days.getMatMenu()" mat-menu-item>
      Daily
    </button>
    <button [matMenuTriggerFor]="month" mat-menu-item>
      Monthly
    </button>
    <button [matMenuTriggerFor]="interval.getMatMenu()" mat-menu-item>
      Interval
    </button>
  </mat-menu>
  <app-days-menu #days (timeDay)="toggleDay($event)" [editModal]="editModal"
                 [receivedHabit]="receivedHabit"></app-days-menu>
  <app-interval-menu #interval (interval)="updateIntervalPerDays($event)"></app-interval-menu>
  <app-habit-menu #habit (habit)="updateHabitName($event)"></app-habit-menu>
</div>

